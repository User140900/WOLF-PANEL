<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>WOLF PANEL</title>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body{
  font-family: Arial, sans-serif;
  background:#020617;
  color:#fff;
  padding:20px;
}
h2{margin-top:30px}
input,button{
  width:100%;
  padding:10px;
  margin:6px 0;
  border-radius:6px;
  border:none;
}
button{cursor:pointer;font-weight:bold}
.card{
  background:#0f172a;
  padding:15px;
  margin:10px 0;
  border-radius:8px;
  border-left:4px solid #22c55e;
}
.approve{background:#22c55e;color:#000}
.reject{background:#ef4444;color:#fff}
.admin-box{border:1px solid #22c55e;padding:15px;border-radius:8px}
</style>
</head>

<body>

<h2>ğŸŸ Buy Ticket</h2>

<input id="name" placeholder="Your Name">
<input id="phone" placeholder="Phone Number">
<input id="utr" placeholder="UTR / Transaction ID">

<button onclick="submitRequest()">Submit Request</button>

<hr>

<h2>ğŸ” Admin Panel</h2>
<input id="adminPass" placeholder="Admin Password">
<button onclick="openAdmin()">Login</button>

<div id="adminPanel" style="display:none" class="admin-box"></div>

<script>
/* ğŸ”¥ FIREBASE CONFIG (ALREADY ADDED) */
const firebaseConfig = {
  apiKey: "AIzaSyAibgTvvYMhyWPatChKDHFmiz7cQEi-ylg",
  authDomain: "wolf-panel-2307d.firebaseapp.com",
  projectId: "wolf-panel-2307d",
  storageBucket: "wolf-panel-2307d.firebasestorage.app",
  messagingSenderId: "295285223790",
  appId: "1:295285223790:web:703bbaa22aa78a1aad917f",
  measurementId: "G-6J79KMW212"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

/* USER SUBMIT */
function submitRequest(){
  const n = name.value.trim();
  const p = phone.value.trim();
  const u = utr.value.trim();

  if(!n || !p || !u){
    alert("Fill all details");
    return;
  }

  db.collection("requests").add({
    name:n,
    phone:p,
    utr:u,
    status:"PENDING",
    time:Date.now()
  });

  alert("Request submitted successfully");
  name.value=phone.value=utr.value="";
}

/* ADMIN LOGIN */
function openAdmin(){
  if(adminPass.value !== "wolfadmin"){
    alert("Wrong password");
    return;
  }

  adminPanel.style.display="block";

  db.collection("requests")
    .orderBy("time","desc")
    .onSnapshot(snapshot=>{
      let html="";
      snapshot.forEach(doc=>{
        const d=doc.data();
        html+=`
          <div class="card">
            <b>${d.name}</b><br>
            ğŸ“ ${d.phone}<br>
            ğŸ’³ ${d.utr}<br>
            Status: <b>${d.status}</b><br><br>
            <button class="approve" onclick="updateStatus('${doc.id}','APPROVED')">Approve</button>
            <button class="reject" onclick="updateStatus('${doc.id}','REJECTED')">Reject</button>
          </div>
        `;
      });
      adminPanel.innerHTML=html;
    });
}

/* UPDATE STATUS */
function updateStatus(id,status){
  db.collection("requests").doc(id).update({status});
}
</script>

</body>
</html>